/*
 * JS for confirm_truck generated by Appery.io
 */

Apperyio.getProjectGUID = function() {
    return 'c14f8a8c-776f-4e7f-8d3d-bc94985d8c58';
};

function navigateTo(outcome, useAjax) {
    Apperyio.navigateTo(outcome, useAjax);
}

function adjustContentHeight() {
    Apperyio.adjustContentHeightWithPadding();
}

function adjustContentHeightWithPadding(_page) {
    Apperyio.adjustContentHeightWithPadding(_page);
}

function setDetailContent(pageUrl) {
    Apperyio.setDetailContent(pageUrl);
}

Apperyio.AppPages = [{
    "name": "confirm_driver",
    "location": "confirm_driver.html"
}, {
    "name": "confirm_customer",
    "location": "confirm_customer.html"
}, {
    "name": "confirm_truck",
    "location": "confirm_truck.html"
}, {
    "name": "startScreen",
    "location": "startScreen.html"
}, {
    "name": "monitor",
    "location": "monitor.html"
}];

function confirm_truck_js() {

    /* Object & array with components "name-to-id" mapping */
    var n2id_buf = {
        'mobilegrid_89': 'confirm_truck_mobilegrid_89',
        'mobilegridcell_90': 'confirm_truck_mobilegridcell_90',
        'Shift_Details_Label': 'confirm_truck_Shift_Details_Label',
        'mobilegridcell_94': 'confirm_truck_mobilegridcell_94',
        'status_grid': 'confirm_truck_status_grid',
        'mobilegridcell_4': 'confirm_truck_mobilegridcell_4',
        'Driver_label_status': 'confirm_truck_Driver_label_status',
        'mobilegridcell_5': 'confirm_truck_mobilegridcell_5',
        'truck_statusgrid_label': 'confirm_truck_truck_statusgrid_label',
        'mobilegridcell_8': 'confirm_truck_mobilegridcell_8',
        'boxLabel_status_grid': 'confirm_truck_boxLabel_status_grid',
        'mobilegridcell_9': 'confirm_truck_mobilegridcell_9',
        'box_load_status_label_status_grid': 'confirm_truck_box_load_status_label_status_grid',
        'mobilegridcell_6': 'confirm_truck_mobilegridcell_6',
        'driverName_statusgrid_label': 'confirm_truck_driverName_statusgrid_label',
        'mobilegridcell_7': 'confirm_truck_mobilegridcell_7',
        'truckName_statusgrid_label': 'confirm_truck_truckName_statusgrid_label',
        'mobilegridcell_10': 'confirm_truck_mobilegridcell_10',
        'box_statusgrid_label': 'confirm_truck_box_statusgrid_label',
        'water_truck_load_status': 'confirm_truck_water_truck_load_status',
        'mobilegridcell_11': 'confirm_truck_mobilegridcell_11',
        'boxmaterial_statusgrid_label': 'confirm_truck_boxmaterial_statusgrid_label',
        'select_truck_grid': 'confirm_truck_select_truck_grid',
        'mobilegridcell_13': 'confirm_truck_mobilegridcell_13',
        'selectTruckDirections': 'confirm_truck_selectTruckDirections',
        'mobilegridcell_15': 'confirm_truck_mobilegridcell_15',
        'truck_list': 'confirm_truck_truck_list',
        'truck_select_items': 'confirm_truck_truck_select_items',
        'mobilelistitembutton_38': 'confirm_truck_mobilelistitembutton_38',
        'truck_name_list': 'confirm_truck_truck_name_list',
        'truck_id_list': 'confirm_truck_truck_id_list',
        'truck_type_list': 'confirm_truck_truck_type_list',
        'truck_loaded_with_box_grid': 'confirm_truck_truck_loaded_with_box_grid',
        'mobilegridcell_24': 'confirm_truck_mobilegridcell_24',
        'truckLoadedwithBox_label': 'confirm_truck_truckLoadedwithBox_label',
        'mobilegridcell_26': 'confirm_truck_mobilegridcell_26',
        'yes_box_ontruck_button': 'confirm_truck_yes_box_ontruck_button',
        'no_boxontruck_button': 'confirm_truck_no_boxontruck_button',
        'select_your_box_grid': 'confirm_truck_select_your_box_grid',
        'mobilegridcell_78': 'confirm_truck_mobilegridcell_78',
        'selectbox_directions_label': 'confirm_truck_selectbox_directions_label',
        'mobilegridcell_80': 'confirm_truck_mobilegridcell_80',
        'box_list': 'confirm_truck_box_list',
        'selectBox_list': 'confirm_truck_selectBox_list',
        'box_name': 'confirm_truck_box_name',
        'mobilelistitembutton_48': 'confirm_truck_mobilelistitembutton_48',
        'box_id_label': 'confirm_truck_box_id_label',
        'box_loaded_material_grid': 'confirm_truck_box_loaded_material_grid',
        'mobilegridcell_73': 'confirm_truck_mobilegridcell_73',
        'boxLoaded_directions_Label': 'confirm_truck_boxLoaded_directions_Label',
        'mobilegridcell_75': 'confirm_truck_mobilegridcell_75',
        'yes_boxisloaded_mat_button': 'confirm_truck_yes_boxisloaded_mat_button',
        'no_boxisempty_button': 'confirm_truck_no_boxisempty_button',
        'confirm_truck_grid': 'confirm_truck_confirm_truck_grid',
        'mobilegridcell_58': 'confirm_truck_mobilegridcell_58',
        'confirmtruck_button': 'confirm_truck_confirmtruck_button'
    };

    if ("n2id" in window && window.n2id !== undefined) {
        $.extend(n2id, n2id_buf);
    } else {
        window.n2id = n2id_buf;
    }

    /*
     * Nonvisual components
     */

    Apperyio.mappings = Apperyio.mappings || {};

    Apperyio.mappings["confirm_truck_confirm_truck_service2_onbeforesend_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": [

        {

            "to_name": "confirm_truck_service2",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {
                    "X-Appery-Database-Id": "{database_id}"
                },
                "parameters": {},
                "body": null
            },

            "mappings": []
        }

        ]
    };

    Apperyio.mappings["confirm_truck_confirm_truck_service2_onsuccess_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": [

        {
            "from_name": "confirm_truck_service2",
            "from_type": "SERVICE_RESPONSE",

            "to_name": "confirm_truck",
            "to_type": "UI",

            "mappings": [

            {

                "source": "$['body'][i]",
                "target": "$['truck_select_items']"

            },

            {

                "source": "$['body'][i]['Name']",
                "target": "$['truck_select_items']['truck_name_list:text']"

            },

            {

                "source": "$['body'][i]['_id']",
                "target": "$['truck_select_items']['truck_id_list:text']"

            },

            {

                "source": "$['body'][i]['functionType']",
                "target": "$['truck_select_items']['truck_type_list:text']"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["confirm_truck_return_truck_details_onbeforesend_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": [

        {
            "from_name": "truck_id",
            "from_type": "LOCAL_STORAGE",

            "to_name": "return_truck_details",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {
                    "X-Appery-Database-Id": "{database_id}"
                },
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['where']"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["confirm_truck_return_truck_details_onsuccess_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": [

        {
            "from_name": "return_truck_details",
            "from_type": "SERVICE_RESPONSE",

            "to_name": "confirm_truck",
            "to_type": "UI",

            "mappings": [

            {

                "source": "$['body'][0]['_id']",
                "target": "$['truck_select_items:text']"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["confirm_truck_confirm_trucktype_rolloff_service_onbeforesend_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": [

        {

            "to_name": "confirm_trucktype_rolloff_service",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {
                    "X-Appery-Database-Id": "{database_id}"
                },
                "parameters": {},
                "body": null
            },

            "mappings": []
        }

        ]
    };

    Apperyio.mappings["confirm_truck_confirm_trucktype_rolloff_service_onsuccess_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": []
    };

    Apperyio.mappings["confirm_truck_confirm_box_service_onbeforesend_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": [

        {

            "to_name": "confirm_box_service",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {
                    "X-Appery-Database-Id": "{database_id}"
                },
                "parameters": {},
                "body": null
            },

            "mappings": []
        }

        ]
    };

    Apperyio.mappings["confirm_truck_confirm_box_service_onsuccess_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": [

        {
            "from_name": "confirm_box_service",
            "from_type": "SERVICE_RESPONSE",

            "to_name": "confirm_truck",
            "to_type": "UI",

            "mappings": [

            {

                "source": "$['body'][i]",
                "target": "$['selectBox_list']"

            },

            {

                "source": "$['body'][i]['_id']",
                "target": "$['selectBox_list']['box_id_label:text']"

            },

            {

                "source": "$['body'][i]['number']",
                "target": "$['selectBox_list']['box_name:text']"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["confirm_truck_return_box_details_onbeforesend_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": [

        {
            "from_name": "confirm_truck",
            "from_type": "UI",

            "to_name": "return_box_details",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {
                    "X-Appery-Database-Id": "{database_id}"
                },
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$['selectBox_list:text']",
                "target": "$['parameters']['where']"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["confirm_truck_return_box_details_onsuccess_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": [

        {
            "from_name": "return_box_details",
            "from_type": "SERVICE_RESPONSE",

            "to_name": "confirm_truck",
            "to_type": "UI",

            "mappings": [

            {

                "source": "$['body'][0]['_id']",
                "target": "$['selectBox_list:text']"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["confirm_truck_update_truck_loadStatus_service_onbeforesend_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": [

        {
            "from_name": "truck_id",
            "from_type": "LOCAL_STORAGE",

            "to_name": "update_truck_loadStatus_service",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {
                    "X-Appery-Database-Id": "{database_id}",
                    "Content-Type": "application/json"
                },
                "parameters": {},
                "body": {
                    "acl": {
                        "*": {
                            "write": true,
                            "read": true
                        }
                    }
                }
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['_id']"

            }

            ]
        },

        {
            "from_name": "truckName",
            "from_type": "LOCAL_STORAGE",

            "to_name": "update_truck_loadStatus_service",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {
                    "X-Appery-Database-Id": "{database_id}",
                    "Content-Type": "application/json"
                },
                "parameters": {},
                "body": {
                    "acl": {
                        "*": {
                            "write": true,
                            "read": true
                        }
                    }
                }
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['body']['Name']"

            }

            ]
        },

        {
            "from_name": "functionType",
            "from_type": "LOCAL_STORAGE",

            "to_name": "update_truck_loadStatus_service",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {
                    "X-Appery-Database-Id": "{database_id}",
                    "Content-Type": "application/json"
                },
                "parameters": {},
                "body": {
                    "acl": {
                        "*": {
                            "write": true,
                            "read": true
                        }
                    }
                }
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['body']['functionType']"

            }

            ]
        },

        {
            "from_name": "loadStatus",
            "from_type": "LOCAL_STORAGE",

            "to_name": "update_truck_loadStatus_service",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {
                    "X-Appery-Database-Id": "{database_id}",
                    "Content-Type": "application/json"
                },
                "parameters": {},
                "body": {
                    "acl": {
                        "*": {
                            "write": true,
                            "read": true
                        }
                    }
                }
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['body']['loadStatus']"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["confirm_truck_update_truck_loadStatus_service_onsuccess_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": []
    };

    Apperyio.mappings["confirm_truck_update_box_service_onbeforesend_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": [

        {
            "from_name": "box_id",
            "from_type": "LOCAL_STORAGE",

            "to_name": "update_box_service",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {
                    "X-Appery-Database-Id": "{database_id}",
                    "Content-Type": "application/json"
                },
                "parameters": {},
                "body": {
                    "acl": {
                        "*": {
                            "write": true,
                            "read": true
                        }
                    }
                }
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['_id']"

            }

            ]
        },

        {
            "from_name": "boxLoadStatus",
            "from_type": "LOCAL_STORAGE",

            "to_name": "update_box_service",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {
                    "X-Appery-Database-Id": "{database_id}",
                    "Content-Type": "application/json"
                },
                "parameters": {},
                "body": {
                    "acl": {
                        "*": {
                            "write": true,
                            "read": true
                        }
                    }
                }
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['body']['loadstatus']"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["confirm_truck_update_box_service_onsuccess_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": []
    };

    Apperyio.mappings["confirm_truck_update_SF_box_serivce_onbeforesend_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": [

        {
            "from_name": "box_sf_object",
            "from_type": "LOCAL_STORAGE",

            "to_name": "update_SF_box_serivce",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {
                    "Authorization": "{salesforce_access_token}",
                    "Content-Type": "application/json"
                },
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['Id']"

            }

            ]
        },

        {
            "from_name": "boxLoadStatus",
            "from_type": "LOCAL_STORAGE",

            "to_name": "update_SF_box_serivce",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {
                    "Authorization": "{salesforce_access_token}",
                    "Content-Type": "application/json"
                },
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['body']['Box_Load_Status__c']"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["confirm_truck_update_SF_box_serivce_onsuccess_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": []
    };

    Apperyio.mappings["confirm_truck_get_sf_box_service_onbeforesend_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": [

        {

            "to_name": "get_sf_box_service",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {
                    "Authorization": "{salesforce_access_token}"
                },
                "parameters": {
                    "q": "SELECT Id, Name, Box_Type__c, Status__c FROM Box__c"
                },
                "body": null
            },

            "mappings": []
        }

        ]
    };

    Apperyio.mappings["confirm_truck_get_sf_box_service_onsuccess_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": [

        {
            "from_name": "get_sf_box_service",
            "from_type": "SERVICE_RESPONSE",

            "to_name": "confirm_truck",
            "to_type": "UI",

            "mappings": [

            {

                "source": "$['body']['records'][i]",
                "target": "$['selectBox_list']"

            },

            {

                "source": "$['body']['records'][i]['Id']",
                "target": "$['selectBox_list']['box_id_label:text']"

            },

            {

                "source": "$['body']['records'][i]['Name']",
                "target": "$['selectBox_list']['box_name:text']"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["confirm_truck_return_sf_box_service_onbeforesend_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": [

        {

            "to_name": "return_sf_box_service",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {
                    "Authorization": "{salesforce_access_token}"
                },
                "parameters": {
                    "q": "SELECT Id, Name, Box_Type__c, Status__c FROM Box__c"
                },
                "body": null
            },

            "mappings": []
        }

        ]
    };

    Apperyio.mappings["confirm_truck_return_sf_box_service_onsuccess_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": [

        {
            "from_name": "return_sf_box_service",
            "from_type": "SERVICE_RESPONSE",

            "to_name": "confirm_truck",
            "to_type": "UI",

            "mappings": [

            {

                "source": "$['body']['records'][0]['Id']",
                "target": "$['selectBox_list:text']"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["confirm_truck_get_sf_truck_service_onbeforesend_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": [

        {

            "to_name": "get_sf_truck_service",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {
                    "Authorization": "{salesforce_access_token}"
                },
                "parameters": {
                    "q": "SELECT Id, Name, Truck_type__c, loadStatus__c FROM Truck__c"
                },
                "body": null
            },

            "mappings": []
        }

        ]
    };

    Apperyio.mappings["confirm_truck_get_sf_truck_service_onsuccess_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": [

        {
            "from_name": "get_sf_truck_service",
            "from_type": "SERVICE_RESPONSE",

            "to_name": "confirm_truck",
            "to_type": "UI",

            "mappings": [

            {

                "source": "$['body']['records'][i]",
                "target": "$['truck_select_items']"

            },

            {

                "source": "$['body']['records'][i]['Name']",
                "target": "$['truck_select_items']['truck_name_list:text']"

            },

            {

                "source": "$['body']['records'][i]['Truck_type__c']",
                "target": "$['truck_select_items']['truck_type_list:text']"

            },

            {

                "source": "$['body']['records'][i]['Id']",
                "target": "$['truck_select_items']['truck_id_list:text']"

            }

            ]
        },

        {
            "from_name": "get_sf_truck_service",
            "from_type": "SERVICE_RESPONSE",

            "to_name": "loadStatus",
            "to_type": "LOCAL_STORAGE",

            "mappings": [

            {

                "source": "$['body']['records'][0]['loadStatus__c']",
                "target": "$"

            }

            ]
        },

        {
            "from_name": "get_sf_truck_service",
            "from_type": "SERVICE_RESPONSE",

            "to_name": "truck_sf_id",
            "to_type": "LOCAL_STORAGE",

            "mappings": [

            {

                "source": "$['body']['records'][0]['Id']",
                "target": "$"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["confirm_truck_return_sf_truck_service_onbeforesend_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": [

        {
            "from_name": "confirm_truck",
            "from_type": "UI",

            "to_name": "return_sf_truck_service",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {
                    "Authorization": "{salesforce_access_token}"
                },
                "parameters": {
                    "q": "SELECT Id, Name, Truck_type__c, loadStatus__c FROM Truck__c"
                },
                "body": null
            },

            "mappings": [

            {

                "source": "$['truck_id_list:text']",
                "target": "$['parameters']['WHERE']"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["confirm_truck_return_sf_truck_service_onsuccess_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": [

        {
            "from_name": "return_sf_truck_service",
            "from_type": "SERVICE_RESPONSE",

            "to_name": "confirm_truck",
            "to_type": "UI",

            "mappings": [

            {

                "source": "$['body']['records'][0]['Id']",
                "target": "$['truck_select_items:text']"

            }

            ]
        }

        ]
    };

    Apperyio.mappings["confirm_truck_update_sf_truckLoadStatus_service_onsuccess_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": []
    };

    Apperyio.mappings["confirm_truck_update_sf_truckLoadStatus_service_onbeforesend_mapping_0"] = {
        "homeScreen": "confirm_truck",
        "directions": [

        {
            "from_name": "truck_sf_id",
            "from_type": "LOCAL_STORAGE",

            "to_name": "update_sf_truckLoadStatus_service",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {
                    "Authorization": "{salesforce_access_token}",
                    "Content-Type": "application/json"
                },
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['parameters']['Id']"

            }

            ]
        },

        {
            "from_name": "loadStatus",
            "from_type": "LOCAL_STORAGE",

            "to_name": "update_sf_truckLoadStatus_service",
            "to_type": "SERVICE_REQUEST",

            "to_default": {
                "headers": {
                    "Authorization": "{salesforce_access_token}",
                    "Content-Type": "application/json"
                },
                "parameters": {},
                "body": null
            },

            "mappings": [

            {

                "source": "$",
                "target": "$['body']['loadStatus__c']"

            }

            ]
        }

        ]
    };

    Apperyio.datasources = Apperyio.datasources || {};

    window.confirm_truck_service2 = Apperyio.datasources.confirm_truck_service2 = new Apperyio.DataSource(stemobiledb_Trucks_list_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_confirm_truck_service2_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {

            Apperyio.refreshScreenFormElements("confirm_truck");
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_confirm_truck_service2_onsuccess_mapping_0"]);
        },
        "onError": function(jqXHR, textStatus, errorThrown) {
            alert("could not list trucks");
        }
    });

    window.return_truck_details = Apperyio.datasources.return_truck_details = new Apperyio.DataSource(stemobiledb_Trucks_query_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_return_truck_details_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {

            Apperyio.refreshScreenFormElements("confirm_truck");
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_return_truck_details_onsuccess_mapping_0"]);
        },
        "onError": function(jqXHR, textStatus, errorThrown) {
            alert("didn't return truck");
        }
    });

    window.confirm_trucktype_rolloff_service = Apperyio.datasources.confirm_trucktype_rolloff_service = new Apperyio.DataSource(stemobiledb_Trucks_query_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_confirm_trucktype_rolloff_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {
            var truckType = localStorage.getItem("functionType");

            if (truckType == "rolloff truck") {
                return Apperyio('truckLoadedwithBox_label').show(), Apperyio('yes_box_ontruck_button').show(), Apperyio('no_boxontruck_button').show(), Apperyio('truck_loaded_with_box_grid').show();

            } else {
                return Apperyio('confirm_truck_grid').show(), Apperyio('confirmtruck_button').show();

            }

            // this tests if the truck is a roll truck?;
            Apperyio.refreshScreenFormElements("confirm_truck");
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_confirm_trucktype_rolloff_service_onsuccess_mapping_0"]);
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });

    window.confirm_box_service = Apperyio.datasources.confirm_box_service = new Apperyio.DataSource(stemobiledb_Boxes_list_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_confirm_box_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {

            Apperyio.refreshScreenFormElements("confirm_truck");
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_confirm_box_service_onsuccess_mapping_0"]);
            //console.log("Box Load - confirm_box_service :", localStorage.getItem("boxLoadstatus"));
        },
        "onError": function(jqXHR, textStatus, errorThrown) {
            alert("could not show boxes");
        }
    });

    window.return_box_details = Apperyio.datasources.return_box_details = new Apperyio.DataSource(stemobiledb_Boxes_query_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_return_box_details_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {

            Apperyio.refreshScreenFormElements("confirm_truck");
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_return_box_details_onsuccess_mapping_0"]);
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });

    window.update_truck_loadStatus_service = Apperyio.datasources.update_truck_loadStatus_service = new Apperyio.DataSource(stemobiledb_Trucks_update_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_update_truck_loadStatus_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {

            Apperyio.refreshScreenFormElements("confirm_truck");
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_update_truck_loadStatus_service_onsuccess_mapping_0"]);
        },
        "onError": function(jqXHR, textStatus, errorThrown) {
            alert("did not update loadStatus for truck");
        }
    });

    window.update_box_service = Apperyio.datasources.update_box_service = new Apperyio.DataSource(stemobiledb_Boxes_update_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_update_box_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {

            Apperyio.refreshScreenFormElements("confirm_truck");
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_update_box_service_onsuccess_mapping_0"]);
        },
        "onError": function(jqXHR, textStatus, errorThrown) {
            alert("Was unable to save box update");
        }
    });

    window.update_SF_box_serivce = Apperyio.datasources.update_SF_box_serivce = new Apperyio.DataSource(Salesforce_Box__c_update_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_update_SF_box_serivce_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {

            Apperyio.refreshScreenFormElements("confirm_truck");
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_update_SF_box_serivce_onsuccess_mapping_0"]);
        },
        "onError": function(jqXHR, textStatus, errorThrown) {
            alert("Was unable to save box update in Salesforce");
        }
    });

    window.get_sf_box_service = Apperyio.datasources.get_sf_box_service = new Apperyio.DataSource(Salesforce_Box__c_query_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_get_sf_box_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {

            Apperyio.refreshScreenFormElements("confirm_truck");
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_get_sf_box_service_onsuccess_mapping_0"]);
            console.log("Box Load salesforce - confirm_box_service :", localStorage.getItem("boxLoadstatus"));
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });

    window.return_sf_box_service = Apperyio.datasources.return_sf_box_service = new Apperyio.DataSource(Salesforce_Box__c_query_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_return_sf_box_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {

            Apperyio.refreshScreenFormElements("confirm_truck");
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_return_sf_box_service_onsuccess_mapping_0"]);
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });

    window.get_sf_truck_service = Apperyio.datasources.get_sf_truck_service = new Apperyio.DataSource(Salesforce_Truck__c_query_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_get_sf_truck_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {

            Apperyio.refreshScreenFormElements("confirm_truck");
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_get_sf_truck_service_onsuccess_mapping_0"]);
            console.log("Truck Load salesforce - confirm_truck_service :", localStorage.getItem("Loadstatus"));
        },
        "onError": function(jqXHR, textStatus, errorThrown) {
            alert("could not list trucks from Salesforce");
        }
    });

    window.return_sf_truck_service = Apperyio.datasources.return_sf_truck_service = new Apperyio.DataSource(Salesforce_Truck__c_query_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_return_sf_truck_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {

            Apperyio.refreshScreenFormElements("confirm_truck");
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_return_sf_truck_service_onsuccess_mapping_0"]);
        },
        "onError": function(jqXHR, textStatus, errorThrown) {
            alert("didn't return truck from Salesforce");
        }
    });

    window.update_sf_truckLoadStatus_service = Apperyio.datasources.update_sf_truckLoadStatus_service = new Apperyio.DataSource(Salesforce_Truck__c_update_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_update_sf_truckLoadStatus_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {

            Apperyio.refreshScreenFormElements("confirm_truck");
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["confirm_truck_update_sf_truckLoadStatus_service_onsuccess_mapping_0"]);
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });

    Apperyio.CurrentScreen = 'confirm_truck';
    _.chain(Apperyio.mappings).filter(function(m) {
        return m.homeScreen === Apperyio.CurrentScreen;
    }).each(Apperyio.UIHandler.hideTemplateComponents);

    /*
     * Events and handlers
     */

    // On Load
    var confirm_truck_onLoad = function() {
            confirm_truck_elementsExtraJS();

            try {
                get_sf_truck_service.execute({});
            } catch (e) {
                console.error(e);
                hideSpinner();
            };
            try {
                $a.c15r("driverName_statusgrid_label", "set", "text", $a.storage["driverName"].get("$"))
            } catch (e) {
                console.error(e)
            };

            confirm_truck_deviceEvents();
            confirm_truck_windowEvents();
            confirm_truck_elementsEvents();
        };

    // screen window events


    function confirm_truck_windowEvents() {

        $('#confirm_truck').bind('pageshow orientationchange', function() {
            var _page = this;
            adjustContentHeightWithPadding(_page);
        });

    };

    // device events


    function confirm_truck_deviceEvents() {
        document.addEventListener("deviceready", function() {

        });
    };

    // screen elements extra js


    function confirm_truck_elementsExtraJS() {
        // screen (confirm_truck) extra code

        /* truck_list */

        listView = $("#confirm_truck_truck_list");
        theme = listView.attr("data-theme");
        if (typeof theme !== 'undefined') {
            var themeClass = "ui-btn-up-" + theme;
            listItem = $("#confirm_truck_truck_list .ui-li-static");
            $.each(listItem, function(index, value) {
                $(this).addClass(themeClass);
            });
        }

        /* truck_select_items */

        /* box_list */

        listView = $("#confirm_truck_box_list");
        theme = listView.attr("data-theme");
        if (typeof theme !== 'undefined') {
            var themeClass = "ui-btn-up-" + theme;
            listItem = $("#confirm_truck_box_list .ui-li-static");
            $.each(listItem, function(index, value) {
                $(this).addClass(themeClass);
            });
        }

        /* selectBox_list */

    };

    // screen elements handler


    function confirm_truck_elementsEvents() {
        $(document).on("click", "a :input,a a,a fieldset label", function(event) {
            event.stopPropagation();
        });

        $(document).off("click", '#confirm_truck_mobilecontainer [name="truck_select_items"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    try {
                        $a.storage["truckName"].update("$", $a.c15r($a.UIHandler.resolveGeneratedComponent('truck_name_list', this), 'get', 'text'))
                    } catch (e) {
                        console.error(e)
                    };
                    try {
                        $a.storage["truck_sf_id"].update("$", $a.c15r($a.UIHandler.resolveGeneratedComponent('truck_id_list', this), 'get', 'text'))
                    } catch (e) {
                        console.error(e)
                    };
                    try {
                        $a.storage["functionType"].update("$", $a.c15r($a.UIHandler.resolveGeneratedComponent('truck_type_list', this), 'get', 'text'))
                    } catch (e) {
                        console.error(e)
                    };
                    toggle('confirm_truck_truckName_statusgrid_label', 'mob', 'true');
                    try {
                        $a.c15r("truckName_statusgrid_label", "set", "text", $a.storage["truckName"].get("$"))
                    } catch (e) {
                        console.error(e)
                    };
                    toggle('confirm_truck_truck_list', 'mob', 'false');
                    toggle('confirm_truck_selectTruckDirections', 'mob', 'false');
                    try {
                        confirm_trucktype_rolloff_service.execute({});
                    } catch (e) {
                        console.error(e);
                        hideSpinner();
                    };
                    toggle('confirm_truck_select_truck_grid', 'mob', 'false');
                    try {
                        $a.storage["truck_id"].update("$", $a.c15r($a.UIHandler.resolveGeneratedComponent('truck_id_list', this), 'get', 'text'))
                    } catch (e) {
                        console.error(e)
                    };

                }
            },
        }, '#confirm_truck_mobilecontainer [name="truck_select_items"]');

        $(document).off("click", '#confirm_truck_mobilecontainer [name="yes_box_ontruck_button"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    toggle('confirm_truck_truck_loaded_with_box_grid', 'mob', 'false');
                    toggle('confirm_truck_truckLoadedwithBox_label', 'mob', 'false');
                    toggle('confirm_truck_yes_box_ontruck_button', 'mob', 'false');
                    toggle('confirm_truck_no_boxontruck_button', 'mob', 'false');
                    toggle('confirm_truck_select_your_box_grid', 'mob', 'true');
                    toggle('confirm_truck_selectbox_directions_label', 'mob', 'true');
                    toggle('confirm_truck_box_statusgrid_label', 'mob', 'true');
                    try {
                        get_sf_box_service.execute({});
                    } catch (e) {
                        console.error(e);
                        hideSpinner();
                    };
                    toggle('confirm_truck_box_name', 'mob', 'true');
                    toggle('confirm_truck_selectBox_list', 'mob', 'true');
                    toggle('confirm_truck_truck_loaded_with_box_grid', 'mob', 'false');
                    toggle('confirm_truck_boxLoaded_directions_Label', 'mob', 'true');
                    try {
                        $a.storage["loadStatus"].update("$", "loaded")
                    } catch (e) {
                        console.error(e)
                    };
                    try {
                        update_sf_truckLoadStatus_service.execute({});
                    } catch (e) {
                        console.error(e);
                        hideSpinner();
                    };

                }
            },
        }, '#confirm_truck_mobilecontainer [name="yes_box_ontruck_button"]');
        $(document).off("click", '#confirm_truck_mobilecontainer [name="no_boxontruck_button"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    try {
                        $a.storage["loadStatus"].update("$", "unloaded")
                    } catch (e) {
                        console.error(e)
                    };
                    try {
                        update_sf_truckLoadStatus_service.execute({});
                    } catch (e) {
                        console.error(e);
                        hideSpinner();
                    };
                    console.log("Truck Load:", localStorage.getItem("loadStatus"));
                    toggle('confirm_truck_truck_loaded_with_box_grid', 'mob', 'false');
                    try {
                        $a.c15r("boxmaterial_statusgrid_label", "set", "text", $a.storage["boxLoadStatus"].get("$"))
                    } catch (e) {
                        console.error(e)
                    };
                    toggle('confirm_truck_truckLoadedwithBox_label', 'mob', 'false');
                    toggle('confirm_truck_yes_box_ontruck_button', 'mob', 'false');
                    toggle('confirm_truck_no_boxontruck_button', 'mob', 'false');
                    toggle('confirm_truck_confirm_truck_grid', 'mob', 'true');
                    toggle('confirm_truck_confirmtruck_button', 'mob', 'true');
                    try {
                        $a.storage["loadStatus"].update("$", "unloaded")
                    } catch (e) {
                        console.error(e)
                    };
                    try {
                        update_sf_truckLoadStatus_service.execute({});
                    } catch (e) {
                        console.error(e);
                        hideSpinner();
                    };

                }
            },
        }, '#confirm_truck_mobilecontainer [name="no_boxontruck_button"]');

        $(document).off("click", '#confirm_truck_mobilecontainer [name="box_list"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    toggle('confirm_truck_box_id_label', 'mob', 'false');

                }
            },
        }, '#confirm_truck_mobilecontainer [name="box_list"]');
        $(document).off("click", '#confirm_truck_mobilecontainer [name="selectBox_list"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    try {
                        $a.storage["box_sf_object"].update("$", $a.c15r($a.UIHandler.resolveGeneratedComponent('box_id_label', this), 'get', 'text'))
                    } catch (e) {
                        console.error(e)
                    };
                    try {
                        $a.storage["boxNumber"].update("$", $a.c15r($a.UIHandler.resolveGeneratedComponent('box_name', this), 'get', 'text'))
                    } catch (e) {
                        console.error(e)
                    };
                    try {
                        $a.c15r("box_statusgrid_label", "set", "text", $a.storage["boxNumber"].get("$"))
                    } catch (e) {
                        console.error(e)
                    };
                    toggle('confirm_truck_box_statusgrid_label', 'mob', 'true');
                    toggle('confirm_truck_box_statusgrid_label', 'mob', 'true');
                    toggle('confirm_truck_box_statusgrid_label', 'mob', 'true');
                    toggle('confirm_truck_boxLabel_status_grid', 'mob', 'true');
                    toggle('confirm_truck_selectBox_list', 'mob', 'false');
                    toggle('confirm_truck_box_list', 'mob', 'false');
                    toggle('confirm_truck_box_loaded_material_grid', 'mob', 'true');
                    toggle('confirm_truck_boxLoaded_directions_Label', 'mob', 'false');
                    toggle('confirm_truck_yes_boxisloaded_mat_button', 'mob', 'true');
                    toggle('confirm_truck_no_boxisempty_button', 'mob', 'true');
                    toggle('confirm_truck_select_your_box_grid', 'mob', 'false');
                    toggle('confirm_truck_selectbox_directions_label', 'mob', 'false');
                    toggle('confirm_truck_selectBox_list', 'mob', 'false');
                    toggle('confirm_truck_boxLoaded_directions_Label', 'mob', 'true');
                    toggle('confirm_truck_box_list', 'mob', 'false');

                }
            },
        }, '#confirm_truck_mobilecontainer [name="selectBox_list"]');
        $(document).off("click", '#confirm_truck_mobilecontainer [name="box_name"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    toggle('confirm_truck_select_your_box_grid', 'mob', 'false');

                }
            },
        }, '#confirm_truck_mobilecontainer [name="box_name"]');

        $(document).off("click", '#confirm_truck_mobilecontainer [name="yes_boxisloaded_mat_button"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    try {
                        $a.storage["boxLoadStatus"].update("$", "full")
                    } catch (e) {
                        console.error(e)
                    };
                    try {
                        $a.storage["materialName"].update("$", "boxmaterial")
                    } catch (e) {
                        console.error(e)
                    };
                    toggle('confirm_truck_boxLabel_status_grid', 'mob', 'true');
                    try {
                        $a.c15r("boxmaterial_statusgrid_label", "set", "text", $a.storage["boxLoadStatus"].get("$"))
                    } catch (e) {
                        console.error(e)
                    };
                    toggle('confirm_truck_boxmaterial_statusgrid_label', 'mob', 'true');
                    var bls = localStorage.getItem("boxLoadStatus");

                    console.log("Box Load:", localStorage.getItem("boxLoadStatus"));
                    console.log(bls);
                    toggle('confirm_truck_box_loaded_material_grid', 'mob', 'false');
                    toggle('confirm_truck_boxLoaded_directions_Label', 'mob', 'false');
                    toggle('confirm_truck_yes_boxisloaded_mat_button', 'mob', 'false');
                    toggle('confirm_truck_no_boxisempty_button', 'mob', 'false');
                    toggle('confirm_truck_confirmtruck_button', 'mob', 'true');
                    toggle('confirm_truck_box_load_status_label_status_grid', 'mob', 'true');
                    toggle('confirm_truck_confirmtruck_button', 'mob', 'true');
                    toggle('confirm_truck_confirm_truck_grid', 'mob', 'true');
                    try {
                        update_SF_box_serivce.execute({});
                    } catch (e) {
                        console.error(e);
                        hideSpinner();
                    };
                    try {
                        update_sf_truckLoadStatus_service.execute({});
                    } catch (e) {
                        console.error(e);
                        hideSpinner();
                    };

                }
            },
        }, '#confirm_truck_mobilecontainer [name="yes_boxisloaded_mat_button"]');
        $(document).off("click", '#confirm_truck_mobilecontainer [name="no_boxisempty_button"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    try {
                        $a.storage["boxLoadStatus"].update("$", "empty")
                    } catch (e) {
                        console.error(e)
                    };
                    toggle('confirm_truck_box_load_status_label_status_grid', 'mob', 'true');
                    try {
                        $a.c15r("boxmaterial_statusgrid_label", "set", "text", $a.storage["boxLoadStatus"].get("$"))
                    } catch (e) {
                        console.error(e)
                    };
                    toggle('confirm_truck_boxmaterial_statusgrid_label', 'mob', 'true');
                    toggle('confirm_truck_boxLoaded_directions_Label', 'mob', 'false');
                    toggle('confirm_truck_box_loaded_material_grid', 'mob', 'false');
                    toggle('confirm_truck_yes_boxisloaded_mat_button', 'mob', 'false');
                    toggle('confirm_truck_no_boxisempty_button', 'mob', 'false');
                    toggle('confirm_truck_confirm_truck_grid', 'mob', 'true');
                    toggle('confirm_truck_confirmtruck_button', 'mob', 'true');
                    try {
                        update_SF_box_serivce.execute({});
                    } catch (e) {
                        console.error(e);
                        hideSpinner();
                    };
                    try {
                        update_sf_truckLoadStatus_service.execute({});
                    } catch (e) {
                        console.error(e);
                        hideSpinner();
                    };

                }
            },
        }, '#confirm_truck_mobilecontainer [name="no_boxisempty_button"]');

        $(document).off("click", '#confirm_truck_mobilecontainer [name="confirmtruck_button"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    Apperyio.navigateTo('confirm_customer', {
                        transition: 'fade',
                        reverse: false
                    });
                    console.log("Truck Load:", localStorage.getItem("loadStatus"));
                    console.log("Truck Type:", localStorage.getItem("functionType"));
                    console.log("Box Load:", localStorage.getItem("boxLoadstatus"));
                    console.log("Box Load:", localStorage.getItem("boxLoadStatus"));
                    console.log("lat:", localStorage.getItem("lat"));
                    console.log("lon:", localStorage.getItem("lon"));

                    var bls = localStorage.getItem("boxLoadStatus");

                }
            },
        }, '#confirm_truck_mobilecontainer [name="confirmtruck_button"]');

    };

    $(document).off("pagebeforeshow", "#confirm_truck").on("pagebeforeshow", "#confirm_truck", function(event, ui) {
        Apperyio.CurrentScreen = "confirm_truck";
        _.chain(Apperyio.mappings).filter(function(m) {
            return m.homeScreen === Apperyio.CurrentScreen;
        }).each(Apperyio.UIHandler.hideTemplateComponents);
    });

    confirm_truck_onLoad();
};

$(document).off("pagecreate", "#confirm_truck").on("pagecreate", "#confirm_truck", function(event, ui) {
    Apperyio.processSelectMenu($(this));
    confirm_truck_js();
});